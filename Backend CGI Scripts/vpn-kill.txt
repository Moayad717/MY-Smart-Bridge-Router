#!/bin/ash
echo "Content-type: text/plain"
echo ""

vpn_process=$(pgrep -af "openvpn --config")

if [ -n "$vpn_process" ]; then
    vpn_config=$(echo "$vpn_process" | awk '{for (i=1; i<=NF; i++) if ($i=="--config") print $(i+1)}')
    echo "VPN is running"
    echo "Connected to: $(basename "$vpn_config")"
else
    echo "VPN is not running"
fi